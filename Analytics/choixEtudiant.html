<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../libs/img/favicon.ico" type="image/png">
    
    <title>Coco - Choix de l'étudiant</title>
    <!-- Custom Fonts -->
    <link href="../libs/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="../libs/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
    <link href="../libs/css/main.css" rel="stylesheet" type="text/css">

    <script src="../libs/js/Others/jquery.min.js" type="text/javascript"></script>
    <script src="../libs/js/Others/lodash.min.js" type="text/javascript"></script>
    <script src="../libs/js/Others/d3.min.js" type="text/javascript"></script>
    <script src="../libs/js/Others/nv.d3.min.js" type="text/javascript"></script>
    <script src="../libs/js/Others/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="../libs/js/Plateforme/test_plateforme.js"></script>
    <script src="../libs/js/Plateforme/datavis.js" type="text/javascript"></script>
</head>

<body>

    <div id="wrapper">
        <a class="navbar-brand" href="index.html">Dashboard COCo</a>
    </div>

    <div class="navbar-default sidebar" role="navigation">
        <div class="sidebar-nav navbar-collapse">
            <ul class="nav" id="side-menu">
                <li>
                   <a href="dashboardEnseignant.html"><i class="fa fa-dashboard fa-fw"></i>Dashboard</a>
                </li>
                <li>
                    <a href="javascript:window.close()"><i class="fa fa-arrow-circle-left fa-fw"></i> Retour</a>
                </li>
            </ul>
        </div>
        <!-- /.sidebar-collapse -->
    </div>

    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Choix de l'étudiant - COCo</h1>
            </div>
        </div>
        <div id='user_select'></div>
    </div>

    <script type="text/javascript">
        var visualizer = new TestsCoco.DataVis("#page-wrapper");
        
        function getData(){
             $.when($.get("../Donnees_tests/analytics_data/questions_3files.json"),
                    $.get("../Donnees_tests/analytics_data/answers_3files.json"))
                .done(function(data1,data2){
                    var dataSet = [];
                    
                    var users = visualizer.getUsers(data2[0]);
                    var users_sessions = visualizer.getSessionByUser(data2[0]);
                    var dates = visualizer.getSessionDate(data2[0]);
                    
                    users.forEach(function(user){
                        var sessions = users_sessions[user];
                        sessions.forEach(function(session){
                            var session_date = dates[session];
                            var url = '<a href="dashboardEtudiant.html?session='+session+'&username='+user+'">'+session_date+'</a>';
                            dataSet.push([user,url]);
                        });
                    });
                    
                    
                    $('#user_select').html( '<table cellpadding="0" cellspacing="0" border="0" class="display" id="user_table"></table>' );
        
                    $('#user_table').dataTable( {
                        "data": dataSet,
                        "columns": [
                            { "title": "Nom" },
                            { "title": "Date session" }
                        ]
                    } );   
                });
        }
        
        getData();
    </script>
</body>
</html>
